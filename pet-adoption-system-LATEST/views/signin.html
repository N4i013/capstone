<!DOCTYPE html>
<html lang="en">
  <head>
    <meta
      name="description"
      content="Find, Care, and Reunite: Your all-in-one web platform for pet adoption, comprehensive pet care resources, and reuniting lost pets with their owners."
    />
    <meta
      name="author"
      content="Cindy Lyka Banabatac, IaN Michael Barral, Nathan Buligan"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    />
    <link rel="icon" type="image/png" href="images/QCACAC LOGO.png" />
    <link rel="stylesheet" href="mystyle/style.css" />
    <script src="javascript/script.js"></script>
    <title>Quezon City Animal Care and Adoption Center</title>
  </head>
  <body>
    <nav id="navbar" class="">
      <div class="nav-wrapper">
        <!--Navbar Logo-->
        <div class="logo">
          <!--Logo Placeholder-->
          <a href="/"
            ><img
              width="65px"
              height="60px"
              src="images/QCACAC LOGO.png"
              alt="LOGO"
          /></a>
        </div>

        <!-- Navbar Links-->
        <ul>
          <li><a href="/" class="active">Home</a></li>
          <li><a href="/petgallery">Pet Gallery</a></li>
          <li><a href="/services">Services</a></li>
          <li><a href="/QCAnimalPound">QC Animal Pound</a></li>
        </ul>
        <button
          type="button"
          class="button-color"
          id="loginButton"
          onclick="window.location.href='signup.html';"
        >
          Signup
        </button>
      </div>
    </nav>

    <div class="container">
      <div
        class="container main-content d-flex align-items-center justify-content-center"
      >
        <div class="col-sm-5 col-md-5 col-lg-5 bg-white rounded p-4 shadow">
          <div class="row justify-content-center mb-4">
            <img
              src="images/QCACAC ALL BG REMOVE.png"
              alt="Logo"
              class="img-fluid"
              style="max-width: 150px"
            />
          </div>
          <!-- Login 9 - Bootstrap Brain Component -->
          <div class="card border-0 rounded-4">
            <div class="card-body p-3 p-md-4 p-xl-5">
              <div class="row">
                <div class="col-12">
                  <div class="mb-4">
                    <h3>Sign in</h3>
                    <p>
                      Don't have an account? <a href="/signup.html">Sign up</a>
                    </p>
                  </div>
                </div>
              </div>
              <form action="/signin" method="POST" id="signinForm">
                <div id="alertContainer" class="mt-3"></div>
                <div class="row gy-3 overflow-hidden">
                  <div class="col-12">
                    <div class="form-floating mb-3">
                      <input
                        type="email"
                        class="form-control"
                        name="email"
                        id="email"
                        placeholder="name@example.com"
                        required
                      />
                      <label for="email" class="form-label">Email</label>
                    </div>
                  </div>
                  <div class="col-12">
                    <div class="form-floating mb-3 position-relative">
                      <input
                        type="password"
                        class="form-control"
                        name="password"
                        id="password"
                        placeholder="Password"
                        required
                      />
                      <label for="password" class="form-label">Password</label>
                      <button
                        type="button"
                        id="togglePassword"
                        class="btn position-absolute top-50 end-0 translate-middle-y me-2"
                      >
                        <i id="eyeIcon" class="fa-solid fa-eye"></i>
                      </button>
                    </div>
                  </div>
                  <div class="col-12">
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        value=""
                        name="remember_me"
                        id="remember_me"
                      />
                      <label
                        class="form-check-label text-secondary"
                        for="remember_me"
                      >
                        Keep me logged in
                      </label>
                    </div>
                  </div>
                  <div class="col-12">
                    <div class="d-grid">
                      <button class="btn btn-primary btn-lg" type="submit">
                        SIGN IN
                      </button>
                    </div>
                  </div>
                </div>
              </form>
              <div class="row">
                <div class="col-12">
                  <div
                    class="d-flex gap-2 gap-md-4 flex-column flex-md-row justify-content-md-end mt-4"
                  >
                    <a href="#!">Forgot password</a>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-12">
                  <p class="mt-4 mb-4">Or continue with</p>
                  <div class="d-flex gap-2 gap-sm-3 justify-content-center">
                    <a
                      href="/auth/google"
                      class="btn btn-outline-danger bsb-btn-circle bsb-btn-circle-2xl"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        fill="currentColor"
                        class="bi bi-google"
                        viewBox="0 0 16 16"
                      >
                        <path
                          d="M15.545 6.558a9.42 9.42 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.689 7.689 0 0 1 5.352 2.082l-2.284 2.284A4.347 4.347 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.792 4.792 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.702 3.702 0 0 0 1.599-2.431H8v-3.08h7.545z"
                        />
                      </svg>
                    </a>
                    <a
                      href="/auth/facebook"
                      class="btn btn-outline-primary bsb-btn-circle bsb-btn-circle-2xl"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        fill="currentColor"
                        class="bi bi-facebook"
                        viewBox="0 0 16 16"
                      >
                        <path
                          d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"
                        />
                      </svg>
                    </a>
                    <a
                      href="/auth/apple"
                      class="btn btn-outline-dark bsb-btn-circle bsb-btn-circle-2xl"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        fill="currentColor"
                        class="bi bi-apple"
                        viewBox="0 0 16 16"
                      >
                        <path
                          d="M11.182.008C11.148-.03 9.923.023 8.857 1.18c-1.066 1.156-.902 2.482-.878 2.516.024.034 1.52.087 2.475-1.258.955-1.345.762-2.391.728-2.43Zm3.314 11.733c-.048-.096-2.325-1.234-2.113-3.422.212-2.189 1.675-2.924 1.728-2.954-.095-.139-1.537-2.1-1.98-2.598-.521-.603-1.135-1.202-1.851-1.202-.719 0-.99.365-1.854.365-.863 0-1.188-.366-1.855-.366-.664 0-1.36.383-1.851 1.16C3.027 4.613 2.41 6.222 2.666 7.916c.302 1.914 2.115 3.81 2.169 3.866-.024.048-1.482 2.07-1.454 4.098.012.345.048.688.072.964 1.626-.066 3.199-1.081 3.85-1.083.659.003 2.303 1.06 3.865 1.081.024-.28.036-.625.048-.976.006-1.394-1.31-3.26-1.332-3.296ZM6.008 15.25c-.024-.046-1.073-1.035-1.203-2.538-.12-1.293.725-2.553.773-2.605.036-.06.966 0 1.791.754.72.665.944 1.336.978 1.375-.024.03-.725 1.22-.755 2.438-.024 1.021.6 1.878.622 1.878-.024 0-.822.247-1.206-.154Z"
                        />
                      </svg>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <br />
    <br />
    <footer class="footer-container">
      <div class="container">
        <p>
          <a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a> |
          <a href="contactus.html">Contact Us</a>
        </p>
        <div class="social-media">
          <a href="https://www.facebook.com/animalcareandadoptioncenter"
            ><img src="images/facebook.png" alt="Facebook"
          /></a>
          <a href="#"><img src="images/instagram.png" alt="Instagram" /></a>
          <a href="#"><img src="images/gmail.png" alt="Gmail" /></a>
        </div>
      </div>
      <br />
      <p>&copy; 2024 Pet Adoption. All rights reserved.</p>
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        console.log("DOM fully loaded and parsed");

        // Handle form submission
        document
          .getElementById("signinForm")
          .addEventListener("submit", function (e) {
            e.preventDefault(); // Prevent default form submission

            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;

            fetch("/signin", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({ email, password }),
            })
              .then((response) => response.json())
              .then((data) => {
                console.log("Response data:", data);

                if (data.error) {
                  if (data.error === "email_not_found") {
                    showAlert(
                      "The email you entered does not exist. Please check and try again or sign up."
                    );
                  } else if (data.error === "invalid_email_or_password") {
                    showAlert("Invalid email or password. Please try again.");
                  } else {
                    showAlert("An error occurred. Please try again.");
                  }
                } else if (data.redirect) {
                  window.location.href = data.redirect;
                }
              })
              .catch((error) => {
                console.error("Error:", error);
                showAlert("An error occurred. Please try again.");
              });
          });

        // Toggle Password Visibility
        document
          .getElementById("togglePassword")
          .addEventListener("click", function () {
            console.log("Toggle Password clicked");
            var passwordField = document.getElementById("password");
            var eyeIcon = document.getElementById("eyeIcon");
            if (passwordField.type === "password") {
              passwordField.type = "text";
              eyeIcon.classList.remove("fa-eye");
              eyeIcon.classList.add("fa-eye-slash");
            } else {
              passwordField.type = "password";
              eyeIcon.classList.remove("fa-eye-slash");
              eyeIcon.classList.add("fa-eye");
            }
          });
      });

      function showAlert(message) {
        const alertContainer = document.getElementById("alertContainer");
        const alertElement = document.createElement("div");
        alertElement.className =
          "alert alert-danger alert-mini alert-dismissible fade show";
        alertElement.role = "alert";
        alertElement.innerHTML = `${message} <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>`;
        alertContainer.appendChild(alertElement);
        setTimeout(() => {
          alertElement.remove();
        }, 5000); // Hide the alert after 5 seconds
      }
    </script>
  </body>
</html>
